---
layout:            post
title:             "SpringBoot - 시작하기"
menutitle:         "SpringBoot - 시작하기"
tags:              spring
category:          Spring
author:            geunyoung
cover:             /assets/mountain-alternative-cover.jpg
published:         true
language:          KO
comments:          true
---

## 들어가기 앞서...

 이번 신입으로 회사를 다시 들어가게 되어 교육을 다시 듣게 되었다. 그 중 나에게 제일 와닿았던 교육은 스프링 부트의 활용이었다. 이전 회사에서는 스프링부트를 사용하는 것이 아닌 레거시스프링을 활용하여 부트를 접해볼 기회가 없어 개인 스터디를 할때 인터넷을 통해 부분적으로 공부를 하다 이번 계기를 통해 체계적으로 배운것들을 정리할 예정이다. 아래의 링크에 스터디용 프로젝트 올리니 참고바란다.  
  
 -https://github.com/rmsdud2435/미정

### 시작하기

  1) https://spring.io/tools에서 STS를 다운받는다.(Tool은 tool일 뿐이니 굳이 이것까지 따라할 필요는 없고 익숙한 것으로 시작)
  
  2) New -> Spring Starter Project 클릭 후, Next 
  
  3) 본인이 만들고픈 자바버전 및 Group, Artifact 작성 후, Next
  
  4) 정말 기본적인 Dependency 추가(내 기준, Spring Boot DevTools(소스 수정시 자동으로 재시작), Mybatis framework(JPA 관련도 추후 작성 예정), MySQL Driver(본인이 사용할 DB Driver로 선택))
    
  5) 프로젝트 생생되었으면 아마 퍄키지 형식의 프로젝트로 안보일 것이다. 그렇다면, 프로젝트 우클릭 -> Configure -> Convert to Maven Project 클릭 후 로딩 대기(혼자 스터디할때는 안떠서 당황했으나 Configure -> Gradle어쩌고저쩌고 클릭하니 내가 아는 프로젝트 형식으로 바뀜)
 
 * ###### SAP
  >독일 솔루션 패키지 기업의 명칭으로서 주요 솔루션패키지는 ERP, HR, CRM(정보처리기사 공부할때도 정말 많이 든던 단어들이죠?ㅋㅋ) 등이 있다.  
  
 * ###### ABAP
  >그 중 ERP 솔루션에서 사용된 언어가 ABAP이다.  
  >ERP에 대해서 참고한 블로그에서는 제조업이나 물류관련한 시스템에서 사용된다고하지만 실제로 몇몇의 대기업들과 협업하다보면 단순히 여러 시스템에서 활용되는 시스템을 ERP라 부르는 곳이 많으며, SAP이 관리하는 것이 아닌 일반적 DB또한 그러하면 ERP라 부르는 기업들도 많은 것같다. 따라서 무조건 정의대로 생각하지 말고 협업을 하면서 어떤 의미로 얘기하는지 파악하고 그에 맞춰서 대응하는게 의사소통이 덜 불편할 것 같다.
  
 * ###### RFC
  > SAP과 타시스템 간에 인터페이스를 돕는 역할이 SAP PO이고, 그 안의 FUNCTION을 RFC(Remote Function Call)이라고 한다.  
  > 일반적으로 정의서를 주고 받을때 해당 단어를 많이 쓴다.

 * ###### EAI
  > 정해진 규약(프로토콜)로 직접 주고 받으면 전송실패시 대처라던지 로그 기록 등을 중립적인 위치에서 남길 수도 없고, 규약 자체도 워낙 그때그때 달라지므로, 이를 중간에서 중재하는 프로그램을 만든 게 EAI이다. 다른 시스템으로 뭔가 데이터가 왔다갔다 할 때(매개변수든, DB 데이터든) 거쳐가는 시스템이라고 보면 된다.  
  > SAP통신시 EAI를 끼는 것이 일반적이다. 

 * ###### JCO
  > 흔히들 RFC를 호출한다(RFC를 CALL한다)는 건, SAP 정보를 타시스템과 주고 받는 것을 뜻하는데 바로 이 RFC를 호출하는 걸 라이브러리로 만들어 쉽게 개발하게끔 SAP에서 제공하는것이 SAP JCO이다.  
  > SAP JCO는 프로토콜을 이용한 통신이기 때문에 각 운영체제, 더 나아가서는 CPU에도 종속이 된다. 따라서 SAP JCO를 설치하실 때에는 프로그래밍 언어의 조건 뿐만 아니라 운영체제와 하드웨어 스펙(CPU)도 고려해야한다.  
  > 실제로 세팅을 하다보면 시스템 변수를 통해 필요 jar위치를 설정하며, OS에 따라 so혹은 dll의 확장자 파일의 활용해서 적용시킨다.


### 설정시 헤매였던 부분 및 알아둬야 하는 부분들

자, 이제 본격적으로 세팅을 하면서 헤매었던 부분들에 대해 정리해보자!

 - 나는 로컬환경은 windows이기 때문에 sapjco3.jar, sapjco3.dll을 다운을 받았다.(SAP 공식 홈페이지에서 다운가능하며, 블로그 등에서도 쉽게 찾을 수 있다.  
 
 - https://mvnrepository.com/ 에서 아래와 같이 세팅하면 된다하여 세팅하였지만 에러발생.
 ```xml
		<dependency>
	 		<groupId>com.sap</groupId>
	 		<artifactId>sapjco</artifactId>
	 		<version>3.0.11</version>
		</dependency>
```
  
 - 아래의 세팅와 같은 세팅을 통해 해결
 ```xml
		<dependency>
	 		<groupId>com.sap</groupId>
	 		<artifactId>sapjco</artifactId>
	 		<version>3.0.11</version>
			<scope>system</scope>			
			<systemPath>sapjco3.jar의 jar경로</systemPath>
		</dependency>
```
  
  - jco의 클래스 사용 시, classDefNotFound가 발생. 헤맨 결과, pom.xml의 scope 태그가 문제였던 걸로 확인. 이전에 포스팅했던 내용이었는데 이걸 헤매다니...ㅠㅠ. 이전 포스팅에서 설명했듯이 scope가 system으로 설정 시, 컴파일할때 해당 jar가 빠지게 된다. 그로 인해 실행시 classDefNotFound가 발생했던 것이다.  
  
  - sapjco3의 jar 및 dll 파일에 대해 해당 프로젝트에 설정시키는 방법이 다양한데, 그 중에 인터넷에서 제일 많이 나오며 SAP 공식 홈페이지의 매뉴얼 방법은 로컬 세팅 기준으로 jar를 server의 library에 추가(tomcat일시 tomcat/bin)하고 dll을 system32에 추가하거나, 시스템 환경 변수 CLASSPATH에 세팅하는 것이다.  
  
  - 현재 로컬에서 다른 프로젝트에서도 해당 톰캣을 사용하고 다른 프로젝트에 영향을 최소화하기 위해 나는 DeployAsembly에 해당 jar추가 후, server의 configuration에 해당 경로 세팅하였다.
  <aside>
<figure>
<img src="{{ "/media/img/Spring/jco.PNG" | absolute_url }}" />>
</figure>
</aside>
  <aside>
<figure>
<img src="{{ "/media/img/Spring/jco2.PNG" | absolute_url }}" />>
</figure>
</aside>
  <aside>
<figure>
<img src="{{ "/media/img/Spring/jco3.PNG" | absolute_url }}" />>
</figure>
</aside>


## 참고한 블로그 및 정보

* >SAP, RFC, JCO 정의 관련  
https://derveljunit.tistory.com/102

* >SAP 관련  
https://kaizen00.tistory.com/22

