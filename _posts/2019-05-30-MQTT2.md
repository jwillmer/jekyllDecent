---
layout:            post
title:             "MQTT에 설치하기(Windows, CentOS)"
menutitle:         "MQTT에 설치하기(Windows, CentOS)"
tags:              IoT
category:          IoT
author:            geunyoung
cover:             /assets/mountain-alternative-cover.jpg
published:         true
cover:             /assets/mountain-alternative-cover.jpg
language:          KO
comments:          true
math:		   false
---

## 세팅 전에...

MQTT 시스템을 사용하기 위해 나는 moquitto를 사용했으며

로컬에서 테스트 때는 윈도우 OS에서, 개발 및 운영은 CentOS에서 작업하였다. 설치를 하면서 참고한 사이트 및 설정파일에 대해 정리한다.


## Windows 세팅하기

https://bigboss.io/2018/05/installing-mosquitto-on-windows-without-spirits/ 의 사이트를 참고하였다.


## CentOs 세팅하기

https://blog.neonkid.xyz/127 의 사이트를 참고하였다.

```

### 어플리케이션 UTF-8수정

Application에 있는 web.xml을 아래와 같이 수정
 
```xml

	<filter>
    	<filter-name>encodingFilter</filter-name>
    	<filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
    	<init-param>
    	  	<param-name>encoding</param-name>
      		<param-value>UTF-8</param-value>
    	</init-param>
  	</filter>
  	<filter-mapping>
    	<filter-name>encodingFilter</filter-name>
    	<url-pattern>/*</url-pattern>
  	</filter-mapping>

```
  
### JSP수정

jsp 맨 위의 페이지에 아래 내용 추가

```jsp

<%@ page session="false" pageEncoding="UTF-8" contentType="text/html; charset=UTF-8" %>

```

### Request 프로토콜 추가(Spring 5 기준)

보통 저기 3단계까지하면 인코딩이 제대로 되었다. 근데 페이지를 redirect할 때나 값을 다시 JSP 페이지로 넘어갈때 인코딩이 안될때가 있다. 그럼 타고있는 Controller를 찾아서 UTF-8 프로토콜을 추가해준다. 

ex)

```java

@GetMapping(value = "/test", produces = "text/plain;charset=UTF-8")
public String test(@Valid JavaBean bean, BindingResult result) {
	return "hello world"
}


```

